{"ast":null,"code":"import _classCallCheck from \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/src/App.js\";\n//------------------------------------------------------------------------------------------------------------------\n// IMPORTS\n//------------------------------------------------------------------------------------------------------------------\nimport React, { Component } from 'react';\nimport { Route, Switch, withRouter } from 'react-router-dom';\nimport HomePage from './pages/HomePage';\nimport Header from './pages/Header';\nimport SignInForm from './pages/SignInForm';\nimport Inventory from './pages/Inventory';\nimport SignUpForm from './pages/SignUpForm'; //grab the validate function from the api.js to use \n\nimport { validate } from './services/api'; // import {getTransactions} from './services/api'\n\nimport { getUsers } from './services/api';\nimport { getAllStocks } from './services/api'; //graphs \n\nimport { allTransactionsCategory } from '../src/services/GraphApis';\nimport { MonthsCategory } from \"../src/services/GraphApis\"; // import {PercentChangeMonthly} from \"../src/services/GraphApis\"\n\nimport './App.css'; //------------------------------------------------------------------------------------------------------------------\n// APP CLASS \n//------------------------------------------------------------------------------------------------------------------\n\nvar App =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(App, _Component);\n\n  function App() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, App);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(App)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      // this is the initial state and when someone signsin this will be updated by the setState below\n      username: '',\n      user: {},\n      transactions: [],\n      savingPots: [],\n      allstocks: [],\n      test: [],\n      sum: [],\n      total_category: [] // month_percent_change: []\n\n    };\n\n    _this.updateSavingPots = function (savingPots) {\n      _this.setState({\n        savingPots: savingPots\n      });\n    };\n\n    _this.deleteSavingPot = function () {\n      getUsers(_this.state.user.id).then(function (data) {\n        return _this.setState({\n          savingPots: data.saving_pots\n        });\n      });\n    };\n\n    _this.updateTransactions = function (transactions) {\n      var thenFetchDataForGraphs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\n      _this.setState({\n        transactions: transactions\n      }, function () {\n        if (thenFetchDataForGraphs) {\n          MonthsCategory(_this.state.user.id, \"2019\").then(function (data) {\n            _this.setState({\n              month_categories_2019: data\n            });\n          });\n          allTransactionsCategory(_this.state.user.id).then(function (data) {\n            _this.setState({\n              total_category: data\n            });\n          });\n          MonthsCategory(_this.state.user.id, \"2018\").then(function (data) {\n            _this.setState({\n              month_categories_2018: data\n            });\n          });\n        }\n      });\n    };\n\n    _this.signin = function (user) {\n      getAllStocks().then(function (data) {\n        _this.setState({\n          allstocks: data,\n          user: user,\n          transactions: user.transactions,\n          savingPots: user.saving_pots,\n          username: user.username\n        }, function () {\n          _this.props.history.push('/inventory');\n        });\n      });\n      MonthsCategory(user.id, \"2019\").then(function (data) {\n        _this.setState({\n          month_categories_2019: data\n        });\n      });\n      allTransactionsCategory(user.id).then(function (data) {\n        _this.setState({\n          total_category: data\n        });\n      });\n      MonthsCategory(user.id, \"2018\").then(function (data) {\n        _this.setState({\n          month_categories_2018: data\n        });\n      });\n      localStorage.setItem('token', user.token); // add token\n    };\n\n    _this.signout = function () {\n      _this.setState({\n        username: ''\n      });\n\n      _this.props.history.push('/');\n\n      localStorage.removeItem('token');\n    };\n\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    //------------------------------------------------------------------------------------------------------------------\n    // component did mount - validate user token\n    //------------------------------------------------------------------------------------------------------------------\n    //import validate function at top\n    //check if we have a token - then -> if we dont show error - but if there is no error then we get our user - hench we can assume the id we had stored in local storage was valid\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (localStorage.token) {\n        validate().then(function (data) {\n          // if (data.error){\n          //   alert(data.error)\n          // } else\n          // {\n          _this2.signin(data); // }\n\n        });\n      }\n    } //total categories  CALL THIS FUNCITON \n    //  setTransactionsTotalCategory = () => {\n    //    debugger\n    //   allTransactionsCategory(this.state.user.id)\n    //     .then( data => {\n    //         this.setState({total_category: data})\n    //       } )\n    //     }\n    //------------------------------------------------------------------------------------------------------------------\n    // render component\n    //------------------------------------------------------------------------------------------------------------------\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var signin = this.signin,\n          signout = this.signout;\n      var _this$state = this.state,\n          username = _this$state.username,\n          transactions = _this$state.transactions,\n          savingPots = _this$state.savingPots,\n          allstocks = _this$state.allstocks,\n          user = _this$state.user; // so we can pass the username down to the header to welcome the user\n\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Header, {\n        username: username,\n        signout: signout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }), React.createElement(Switch, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, React.createElement(Route, {\n        exact: true,\n        path: \"/\",\n        render: function render(props) {\n          return React.createElement(HomePage, Object.assign({\n            user: user,\n            allstocks: allstocks,\n            savingPots: savingPots,\n            transactions: transactions,\n            username: username\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 186\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }), \" />\", React.createElement(Route, {\n        path: \"/signin\",\n        render: function render(props) {\n          return React.createElement(SignInForm, Object.assign({\n            signin: signin\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 187\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/inventory\",\n        render: function render(props) {\n          return React.createElement(Inventory, Object.assign({\n            deleteSavingPot: _this3.deleteSavingPot,\n            updateTransactions: _this3.updateTransactions,\n            updatePots: _this3.updateSavingPots,\n            month_categories_2018: _this3.state.month_categories_2018,\n            month_categories_2019: _this3.state.month_categories_2019,\n            total_category: _this3.state.total_category,\n            user: user,\n            allstocks: allstocks,\n            savingPots: savingPots,\n            transactions: transactions,\n            username: username\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 188\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(Route, {\n        path: \"/signup\",\n        render: function render(props) {\n          return React.createElement(SignUpForm, Object.assign({\n            signin: signin\n          }, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 189\n            },\n            __self: this\n          }));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }), React.createElement(Route, {\n        render: function render() {\n          return React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 190\n            },\n            __self: this\n          }, \"Page not found.\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      })));\n    } //------------------------------------------------------------------------------------------------------------------\n\n  }]);\n\n  return App;\n}(Component); //------------------------------------------------------------------------------------------------------------------\n// EXPORT\n//------------------------------------------------------------------------------------------------------------------\n\n\nexport default withRouter(App); //  by adding withRouter in the import and at the export of App => we get match, location and history","map":{"version":3,"sources":["/Users/ellekennedyvalentine/Dev/mod5 /week_1/react-project-DBO/client/src/App.js"],"names":["React","Component","Route","Switch","withRouter","HomePage","Header","SignInForm","Inventory","SignUpForm","validate","getUsers","getAllStocks","allTransactionsCategory","MonthsCategory","App","state","username","user","transactions","savingPots","allstocks","test","sum","total_category","updateSavingPots","setState","deleteSavingPot","id","then","data","saving_pots","updateTransactions","thenFetchDataForGraphs","month_categories_2019","month_categories_2018","signin","props","history","push","localStorage","setItem","token","signout","removeItem"],"mappings":"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","sourcesContent":["//------------------------------------------------------------------------------------------------------------------\n// IMPORTS\n//------------------------------------------------------------------------------------------------------------------\n\nimport React, { Component } from 'react'\nimport { Route, Switch, withRouter} from 'react-router-dom'\n\nimport HomePage from './pages/HomePage'\nimport Header from './pages/Header'\nimport SignInForm from './pages/SignInForm'\nimport Inventory from './pages/Inventory'\nimport SignUpForm from './pages/SignUpForm'\n\n\n//grab the validate function from the api.js to use \nimport {validate} from './services/api'\n// import {getTransactions} from './services/api'\nimport {getUsers} from './services/api'\nimport {getAllStocks} from './services/api'\n\n\n//graphs \n\nimport {allTransactionsCategory} from '../src/services/GraphApis' \nimport {MonthsCategory} from \"../src/services/GraphApis\"\n\n// import {PercentChangeMonthly} from \"../src/services/GraphApis\"\n\n\n\n\n\n\n\n\nimport './App.css'\n\n//------------------------------------------------------------------------------------------------------------------\n// APP CLASS \n//------------------------------------------------------------------------------------------------------------------\n\nclass App extends Component {\n\n// initial state\n//------------------------------------------------------------------------------------------------------------------\n  state = { // this is the initial state and when someone signsin this will be updated by the setState below\n    username:'',\n    user:{},\n    transactions:[],\n    savingPots:[],\n    allstocks:[],\n    test: [],\n    sum: [],\n    total_category: [],\n    // month_percent_change: []\n  }\n\n  updateSavingPots = savingPots => {\n     this.setState({ savingPots })\n  }\n\n\n  deleteSavingPot = () => {\n    getUsers(this.state.user.id)\n    .then( data => this.setState({savingPots: data.saving_pots}))\n  }\n\n  updateTransactions = (transactions, thenFetchDataForGraphs = false) => {\n    this.setState({ transactions }, () => {\n      if (thenFetchDataForGraphs) {\n        MonthsCategory(this.state.user.id, \"2019\")\n    .then( data => {\n            this.setState({month_categories_2019: data})\n         } )\n\n    allTransactionsCategory(this.state.user.id)\n    .then( data => {\n        this.setState({total_category: data})\n      } )\n \n     MonthsCategory(this.state.user.id, \"2018\")\n          .then( data => {\n                  this.setState({month_categories_2018: data})\n               } )\n\n\n      }\n    })\n }\n//------------------------------------------------------------------------------------------------------------------\n// sign in\n//------------------------------------------------------------------------------------------------------------------\n  // only one user can be signed in at once so when they are the username will be replaced eachtime\n  //update sign in since it was expecting a string now it will be getting a little object with username and id\n  signin = (user) => { \n    \n    getAllStocks().then( data => \n      {\n        this.setState({allstocks: data, user: user, transactions: user.transactions, savingPots: user.saving_pots, username: user.username}, () => {\n          this.props.history.push('/inventory')\n        })\n      }\n    )\n\n    MonthsCategory(user.id, \"2019\")\n    .then( data => {\n            this.setState({month_categories_2019: data})\n         } )\n\n    allTransactionsCategory(user.id)\n    .then( data => {\n        this.setState({total_category: data})\n      } )\n \n     MonthsCategory(user.id, \"2018\")\n          .then( data => {\n                  this.setState({month_categories_2018: data})\n               } )\n\n \n\n    localStorage.setItem('token', user.token) // add token\n    \n\n  }\n//------------------------------------------------------------------------------------------------------------------\n\n// sign out\n//------------------------------------------------------------------------------------------------------------------\n// if we are signin we will also be want to be able to signout - here will again set the state of username back to nothing\n// now in signout it will also remove the token from local storage, we only need to give the key and dont require a value when we are using removeItem()\n// you could have also used  localStorage.clear('token') => but this would have removed everything and if we were also storing other stuff this would be a problem\nsignout = () => { \n   this.setState({username:''})\n   this.props.history.push('/')\n   localStorage.removeItem('token')\n }\n//------------------------------------------------------------------------------------------------------------------\n\n// component did mount - validate user token\n//------------------------------------------------------------------------------------------------------------------\n //import validate function at top\n //check if we have a token - then -> if we dont show error - but if there is no error then we get our user - hench we can assume the id we had stored in local storage was valid\n componentDidMount(){\n   if (localStorage.token){\n     validate()\n      .then(\n        data => {\n        // if (data.error){\n        //   alert(data.error)\n        // } else\n        // {\n          this.signin(data)\n        // }\n      }\n      )\n   }\n }\n\n\n //total categories  CALL THIS FUNCITON \n\n//  setTransactionsTotalCategory = () => {\n//    debugger\n      \n//   allTransactionsCategory(this.state.user.id)\n//     .then( data => {\n//         this.setState({total_category: data})\n//       } )\n\n     \n//     }\n //------------------------------------------------------------------------------------------------------------------\n\n// render component\n//------------------------------------------------------------------------------------------------------------------\n  render() {\n    const {signin, signout} = this\n    const {username, transactions, savingPots, allstocks, user} = this.state // so we can pass the username down to the header to welcome the user\n\n    return (\n      <div className=\"App\">\n        <Header username={username} signout={signout}/> \n        \n        <Switch> \n          <Route exact path='/' render={props => <HomePage user={user} allstocks={allstocks} savingPots={savingPots} transactions={transactions} username={username} {...props}/> } /> />\n          <Route path='/signin' render={props => <SignInForm signin={signin} {...props}/>} />\n          <Route path='/inventory' render={props => <Inventory deleteSavingPot={this.deleteSavingPot} updateTransactions={this.updateTransactions} updatePots={this.updateSavingPots} month_categories_2018={this.state.month_categories_2018} month_categories_2019={this.state.month_categories_2019} total_category={this.state.total_category} user={user} allstocks={allstocks} savingPots={savingPots} transactions={transactions} username={username} {...props}/> } />\n          <Route path='/signup' render={props => <SignUpForm signin={signin} {...props}/>} />\n          <Route render={() => <h1>Page not found.</h1>} />\n        </Switch>\n      </div>\n    )\n  }\n//------------------------------------------------------------------------------------------------------------------\n\n}\n\n\n//------------------------------------------------------------------------------------------------------------------\n// EXPORT\n//------------------------------------------------------------------------------------------------------------------\n\n\nexport default withRouter(App)\n\n\n//  by adding withRouter in the import and at the export of App => we get match, location and history"]},"metadata":{},"sourceType":"module"}